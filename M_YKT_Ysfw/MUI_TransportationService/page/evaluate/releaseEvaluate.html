<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>运输评价</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link rel="stylesheet" href="../../css/mui.min.css" />
		<link rel="stylesheet" href="../../fonts/iconfont.css" />
		<link rel="stylesheet" href="../../css/index.css" />
		<link rel="stylesheet" href="../../css/style.css" />
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="background: #27c1f7;">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="color: white;"></a>
			<h1 class="mui-title" style="color: white;">运输评价</h1>
			<a class="mui-icon mui-pull-right" id="id_Release_A" style="font-size: 15px; line-height: 28px; color: white;">发布</a>
		</header>

		<div class="mui-content" style="padding-top: 44px;">
			<section class="order">
				<div class="dynamic-list-head">
					<i class="dynamic-i-l icon-evaluate"></i>
					<b>服 务 评 价</b>
				</div>
				<div style="height: 0.2rem; background-color: #f2f2f2;"></div>
				<div class="contaniner1">
					<div>
						<section class="assess">
							<p style="margin: 0; color: black;">
								<span>停车<br />办证</span>
								<textarea rows="5" placeholder="写下你的评论吧" id="id_ParkingCard_Textarea" style="font-size: 1rem;"></textarea>
							</p>
						</section>

						<section class="assess">
							<p style="margin: 0; color: black;">
								<span>放行<br />装卸</span>
								<textarea rows="2" placeholder="写下你的评论吧" id="id_ReleaseCargo_Textarea" style="font-size: 1rem;"></textarea>
							</p>
						</section>

						<section class="assess">
							<p style="margin: 0; color: black;">
								<span>港区<br />卡口</span>
								<textarea rows="2" placeholder="写下你的评论吧" id="id_PortBayonet_Textarea" style="font-size: 1rem;"></textarea>
							</p>
						</section>
					</div>
					<div style="height: 0.5rem;"></div>
				</div>

				<div style="height: 0.5rem; background-color: #f2f2f2;"></div>
				<div class="dynamic-list-head">
					<i class="dynamic-i-l icon-score"></i>
					<b>服 务 评 分</b>
				</div>
				<div style="height: 0.2rem; background-color: #f2f2f2;"></div>

				<div class="contaniner1">
					<section class="assess">
						<ul style="margin: 0;">
							<span>服务<br />态度</span>
							<li class="assess-right_1" style="margin-top: 10px;" id="id_Assess-right_1_Li">
								<img onclick="level_1(1)" src="../../images/detail-iocn01.png" />
								<img onclick="level_1(2)" src="../../images/detail-iocn01.png" />
								<img onclick="level_1(3)" src="../../images/detail-iocn01.png" />
								<img onclick="level_1(4)" src="../../images/detail-iocn01.png" />
								<img onclick="level_1(5)" src="../../images/detail-iocn01.png" />
							</li>
						</ul>
					</section>
					<section class="assess">
						<ul style="margin: 0;">
							<span>放行<br />速度</span>
							<li class="assess-right_2" style="margin-top: 10px;" id="id_Assess-right_2_Li">
								<img onclick="level_2(1)" src="../../images/detail-iocn01.png" />
								<img onclick="level_2(2)" src="../../images/detail-iocn01.png" />
								<img onclick="level_2(3)" src="../../images/detail-iocn01.png" />
								<img onclick="level_2(4)" src="../../images/detail-iocn01.png" />
								<img onclick="level_2(5)" src="../../images/detail-iocn01.png" />
							</li>
						</ul>
					</section>
					<section class="assess">
						<ul style="margin: 0;">
							<span>卸载<br />速度</span>
							<li class="assess-right_3" style="margin-top: 10px;" id="id_Assess-right_3_Li">
								<img onclick="level_3(1)" src="../../images/detail-iocn01.png" />
								<img onclick="level_3(2)" src="../../images/detail-iocn01.png" />
								<img onclick="level_3(3)" src="../../images/detail-iocn01.png" />
								<img onclick="level_3(4)" src="../../images/detail-iocn01.png" />
								<img onclick="level_3(5)" src="../../images/detail-iocn01.png" />
							</li>
						</ul>
					</section>
					<section class="assess">
						<ul>
							<span>总体<br />评价</span>
							<li class="assess-right_4" style="margin-top: 10px;" id="id_Assess-right_4_Li">
								<img onclick="level_4(1)" src="../../images/detail-iocn01.png" />
								<img onclick="level_4(2)" src="../../images/detail-iocn01.png" />
								<img onclick="level_4(3)" src="../../images/detail-iocn01.png" />
								<img onclick="level_4(4)" src="../../images/detail-iocn01.png" />
								<img onclick="level_4(5)" src="../../images/detail-iocn01.png" />
							</li>
						</ul>
					</section>
				</div>
				<div style="height: 0.5rem;"></div>
				<div style="height: 0.5rem; background-color: #f2f2f2;"></div>
			</section>
		</div>
		<script src="../../js/mui.min.js "></script>
		<script type="text/javascript" src="../../js/md5-min.js" ></script>
		<script type="text/javascript" src="../../js/config.js "></script>
		<script type="text/javascript" src="../../js/common.js "></script>
		<script type="text/javascript ">
			//账户
			var account = "";
			//ID
			var evaluateId = "";
			//服务态度
			var serviceAttitude = 5;
			//放行速度
			var releaseSpeed = 5;
			//卸载速度
			var uninstallSpeed = 5;
			//总体评价
			var overallEvaluation = 5;

			mui.init({
				//				swipeBack: true,
				//				gestureConfig: {
				//					swipe: true 
				//				},
			});

			mui.plusReady(function() {
				var params = plus.webview.currentWebview();
				//账户
				account = params.account;
				//ID
				evaluateId = params.evaluateId;

				//发布
				document.getElementById("id_Release_A").addEventListener('tap', function() {

					var btnArray = ['取消', '确定'];
					var dl = this.parentNode.parentNode;
					mui.confirm("确定发布？", "", btnArray, function(e) {
						if(e.index == 1) {
							//停车办证
							var parkingCard = document.getElementById('id_ParkingCard_Textarea').value.trim();
							//放行装卸
							var releaseCargo = document.getElementById('id_ReleaseCargo_Textarea').value.trim();
							//港区卡口
							var portBayonet = document.getElementById('id_PortBayonet_Textarea').value.trim();

							var objectList = new Array();
							objectList.push(new KeyValue("AppName", Sys.APP_CODE));
							objectList.push(new KeyValue("Account", account));
							objectList.push(new KeyValue("Id", evaluateId));
							objectList.push(new KeyValue("ParkingCard", parkingCard));
							objectList.push(new KeyValue("ReleaseCargo", releaseCargo));
							objectList.push(new KeyValue("PortBayonet", portBayonet));
							objectList.push(new KeyValue("ServiceAttitude", serviceAttitude));
							objectList.push(new KeyValue("ReleaseSpeed", releaseSpeed));
							objectList.push(new KeyValue("UninstallSpeed", uninstallSpeed));
							objectList.push(new KeyValue("OverallEvaluation", overallEvaluation));
							
							mui.ajax({
								type: 'POST',
								data: {
									'AppName': Sys.APP_CODE,
									'Sign': GetSign(objectList),
									'Account': account,
									'Id': evaluateId,
									'ParkingCard': parkingCard,
									'ReleaseCargo': releaseCargo,
									'PortBayonet': portBayonet,
									'ServiceAttitude': serviceAttitude,
									'ReleaseSpeed': releaseSpeed,
									'UninstallSpeed': uninstallSpeed,
									'OverallEvaluation': overallEvaluation
								},
								url: Url.HTTP_RELEASE_EVALUATE_URL,
								timeout: 10000, //超时时间设置为10秒；
								dataType: 'json', //服务器返回json格式数据

								success: function(data) {

									if(data.IsSuccess) {

										mui.toast(data.Message);
										//返回上一级
										mui.back;
										//重新加载
										var wobj = plus.webview.getWebviewById("toEvaluate.html");
										wobj.reload(true);

									} else {
										console.log(data.Message);
										mui.toast(data.Message);
									}
								},
								error: function(xhr, type, errorThrown) {

									console.log(errorThrown);
									mui.toast("网络未连接");
								}
							});
						}
					});
				});

			});

			function level_1(s) {
				serviceAttitude = s;

				var str = '';

				var k = 6 - s;

				for(i = 1; i < s + 1; i++) {
					str += "<img onclick='level_1(" + i + ")' src='../../images/detail-iocn01.png'/>";
				}
				for(j = 1; j < k; j++) {
					var d = j + s
					str += "<img onclick='level_1(" + d + ")' src='../../images/detail-iocn001.png'/>";
				}

				document.getElementById('id_Assess-right_1_Li').innerHTML = str;
			}

			function level_2(s) {
				releaseSpeed = s;

				var str = '';

				var k = 6 - s;

				for(i = 1; i < s + 1; i++) {
					str += "<img onclick='level_2(" + i + ")' src='../../images/detail-iocn01.png'/>";
				}
				for(j = 1; j < k; j++) {
					var d = j + s
					str += "<img onclick='level_2(" + d + ")' src='../../images/detail-iocn001.png'/>";
				}

				document.getElementById('id_Assess-right_2_Li').innerHTML = str;
			}

			function level_3(s) {

				uninstallSpeed = s;

				var str = '';

				var k = 6 - s;

				for(i = 1; i < s + 1; i++) {
					str += "<img onclick='level_3(" + i + ")' src='../../images/detail-iocn01.png'/>";
				}
				for(j = 1; j < k; j++) {
					var d = j + s
					str += "<img onclick='level_3(" + d + ")' src='../../images/detail-iocn001.png'/>";
				}

				document.getElementById('id_Assess-right_3_Li').innerHTML = str;
			}

			function level_4(s) {
				overallEvaluation = s;

				var str = '';

				var k = 6 - s;

				for(i = 1; i < s + 1; i++) {
					str += "<img onclick='level_4(" + i + ")' src='../../images/detail-iocn01.png'/>";
				}
				for(j = 1; j < k; j++) {
					var d = j + s
					str += "<img onclick='level_4(" + d + ")' src='../../images/detail-iocn001.png'/>";
				}

				document.getElementById('id_Assess-right_4_Li').innerHTML = str;
			}
		</script>

	</body>

</html>